/**
 * @name Os2DisplayDefaultTemplateBundle
 * @version v1.0.0
 * @link https://github.com/itk-os2display/default-template-bundle
 */
angular.module("toolsModule").directive("backgroundEditor",["mediaFactory",function(e){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},link:function(t){t.step="background-picker",t.backgroundPicker=function(){t.step="background-picker"},t.pickFromMedia=function(){t.step="pick-from-media"},t.pickFromComputer=function(){t.step="pick-from-computer"},t.clickBackgroundColor=function(){t.slide.options.images=[]};t.$on("mediaOverview.selectMedia",function(e,o){!function(e){for(var o=[],i=!1,l=0;l<t.slide.media.length;l++)t.slide.media[l].id===e.id&&(i=!0);i||o.push(e),t.slide.media=o}(o)}),t.$on("mediaUpload.uploadSuccess",function(o,i){e.getMedia(i.id).then(function(e){t.slide.media=[e]},function(e){busService.$emit("log.error",{cause:e,msg:"Kunne ikke tilføje media."})}),i.queue.find(function(e,t){return!e.isSuccess})||t.close()})},templateUrl:function(e,t){return t.template?t.template:"/bundles/os2displaydefaulttemplate/apps/toolsModule/background-editor.html"}}}]),angular.module("toolsModule").directive("baseEditor",[function(){return{restrict:"E",replace:!0,scope:{slide:"=",template:"@",close:"&"},templateUrl:function(e,t){return t.template}}}]),angular.module("toolsModule").directive("headerEditorResponsive",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},templateUrl:"/bundles/os2displaydefaulttemplate/apps/toolsModule/header-editor-responsive.html"}}),angular.module("toolsModule").directive("logoEditor",["mediaFactory",function(e){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},link:function(t){t.logoStep="logo-picker",t.logoPicker=function(){t.logoStep="logo-picker"},t.pickLogoFromMedia=function(){t.logoStep="pick-logo-from-media",t.$emit("mediaOverview.updateSearch")},t.pickLogoFromComputer=function(){t.logoStep="pick-logo-from-computer"},t.logoPositions=[{value:{top:"0",bottom:"auto",left:"0",right:"auto"},text:"top venstre"},{value:{top:"0",bottom:"auto",left:"auto",right:"0"},text:"top højre"},{value:{top:"auto",bottom:"0",left:"0",right:"auto"},text:"bund venstre"},{value:{top:"auto",bottom:"0",left:"auto",right:"0"},text:"bund højre"}],t.logoSizes=[{value:"5%",text:"Meget lille (5% af skærmen)"},{value:"10%",text:"Lille (10% af skærmen)"},{value:"15%",text:"Medium (15% af skærmen)"},{value:"20%",text:"Stor (20% af skærmen)"},{value:"40%",text:"Ekstra stor (40% af skærmen)"}],t.$on("mediaOverview.selectMedia",function(e,o){"logo"===o.media_type&&(t.slide.logo=o,t.logoStep="logo-picker")}),t.$on("mediaUpload.uploadSuccess",function(o,i){e.getMedia(i.id).then(function(e){"logo"===e.media_type&&(t.slide.logo=e,t.logoStep="logo-picker")},function(e){busService.$emit("log.error",{cause:e,msg:"Kunne ikke tilføje media."})})})},templateUrl:function(e,t){return t.template?t.template:"/bundles/os2displaydefaulttemplate/apps/toolsModule/logo-editor.html"}}}]),angular.module("toolsModule").directive("manualCalendarEditor",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},link:function(e){function t(){e.newEvent={title:null,place:null,from:null,to:null}}t(),e.newEventItem=function(){e.slide.options.eventitems.push(angular.copy(e.newEvent)),t()},e.removeEventItem=function(t){e.slide.options.eventitems.splice(e.slide.options.eventitems.indexOf(t),1)},e.sortEvents=function(){e.slide.options.eventitems.length>0&&(e.slide.options.eventitems=$filter("orderBy")(e.slide.options.eventitems,"from"))},e.eventIsOutdated=function(e){var t=e.to,o=e.from,i=Date.now()/1e3;return t&&i>t||!t&&i>o},e.sortEvents()},templateUrl:"/bundles/os2displaydefaulttemplate/apps/toolsModule/manual-calendar-editor.html"}}),angular.module("toolsModule").directive("rssEditor",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},templateUrl:"/bundles/os2displaydefaulttemplate/apps/toolsModule/rss-editor.html"}}),angular.module("toolsModule").directive("slideshowEditor",["mediaFactory",function(e){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},link:function(t){t.step="background-picker",t.backgroundPicker=function(){t.step="background-picker"},t.pickFromMedia=function(){t.step="pick-from-media"},t.pickFromComputer=function(){t.step="pick-from-computer"},t.clickBackgroundColor=function(){t.slide.options.images=[]};t.$on("mediaOverview.selectMedia",function(e,o){!function(e){for(var o=[],i=!1,l=0;l<t.slide.media.length;l++){var n=t.slide.media[l];n.id!==e.id?o.push(n):i=!0}i||o.push(e),t.slide.media=o}(o)}),t.$on("mediaUpload.uploadSuccess",function(o,i){e.getMedia(i.id).then(function(e){t.slide.media.push(e)},function(e){busService.$emit("log.error",{cause:e,msg:"Kunne ikke tilføje media."})}),i.queue.find(function(e,t){return!e.isSuccess})||t.close()})},templateUrl:"/bundles/os2displaydefaulttemplate/apps/toolsModule/slideshow-editor.html"}}]),angular.module("toolsModule").directive("slideshowEffectsEditor",[function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},templateUrl:"/bundles/os2displaydefaulttemplate/apps/toolsModule/slideshow-effects-editor.html"}}]),angular.module("toolsModule").directive("slideshowOrderEditor",[function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},link:function(e){function t(e,t,o){var i=e[t];e[t]=e[o],e[o]=i}e.pushMediaRight=function(o){o===e.slide.media.length-1?t(e.slide.media,o,0):t(e.slide.media,o,o+1)},e.pushMediaLeft=function(o){t(e.slide.media,o,0===o?e.slide.media.length-1:o-1)},e.removeMedia=function(t){e.slide.media.splice(t,1)},e.handleDropMedia=function(t,o){t=parseInt(t.split("index-")[1]),o=parseInt(o.split("index-")[1]);var i=e.slide.media.splice(t,1);e.slide.media.splice(o,0,i[0])}},templateUrl:"/bundles/os2displaydefaulttemplate/apps/toolsModule/slideshow-order-editor.html"}}]),angular.module("toolsModule").directive("sourceEditor",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},templateUrl:"/bundles/os2displaydefaulttemplate/apps/toolsModule/source-editor.html"}}),angular.module("toolsModule").directive("textEditor",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},templateUrl:"/bundles/os2displaydefaulttemplate/apps/toolsModule/text-editor.html"}});